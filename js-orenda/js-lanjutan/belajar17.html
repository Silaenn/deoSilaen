<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>latihan</title>
</head>
<body>
    <script>
        let stock = {
        Fruits : ['Strawberry', 'grapes', 'banana', 'apple'],
        liquid : ["water", "ice"],
        holder : ["cone", "cup", "stick"],
        toppings : ["chocolate", "peanuts"],
       }

       let is_shop_open = false;

    //    let toopings_choice = () => {

    //     return new Promise( (resolve, reject) =>{
    //         setTimeout(() => {
    //             resolve(console.log('which top  ping would you love?'))
    //         }, 3000)

    //     })

    //    }

    //    async function kitchen () {
    //     console.log(' A ');
    //     console.log(' B ');
    //     console.log(' C ');

    //     await toopings_choice()

    //     console.log(' D ');
    //     console.log(' E ');

    //    }

    //    kitchen()

    //    console.log('doing the dishes');
    //    console.log('cleaning the tables');
    //    console.log('taking others orders');

    function time(ms){
        return new Promise((resolve, reject) => {
            if(is_shop_open){
                setTimeout(resolve, ms)
            } else {
                reject(console.log('shop is closed'))
            }
        })
    }

    async function kitchen () {
        try{

            await time(2000)
            console.log(`${stock.Fruits[0]} was selected`);

            await time(0000)
            console.log('start the production');

            await time(2000)
            console.log('cut the fruit');

            await time(1000)
            console.log(`${stock.liquid[0]} and ${stock.liquid[1]} was added`);

            await time(1000)
            console.log('start the machine');

            await time(2000)
            console.log(`ice cream placed on ${stock.holder[0]}`);

            await time(3000)
            console.log(`${stock.toppings[0]} was selected`);

            await time(2000)
            console.log('serve ice cream');
        }
        catch (error) {
            console.log('customer left', error);
        }
        finally{
            console.log('day ended, shop is closed');
        }
         
    }

    kitchen();

    </script>
</body>
</html>